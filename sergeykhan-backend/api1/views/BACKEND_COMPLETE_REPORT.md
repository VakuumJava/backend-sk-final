# üéâ –°–ï–†–í–ï–†–ù–ê–Ø –ß–ê–°–¢–¨ –ì–û–¢–û–í–ê: –ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–∏–±—ã–ª–∏ –º–∞—Å—Ç–µ—Ä–æ–≤

## ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### üìä –ò–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è –º–∞—Å—Ç–µ—Ä–æ–≤
- **–ú–æ–¥–µ–ª—å `MasterProfitSettings`** - —Ö—Ä–∞–Ω–∏—Ç –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–µ –ø—Ä–æ—Ü–µ–Ω—Ç—ã –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –º–∞—Å—Ç–µ—Ä–∞
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ñ–∞–ª–ª–±—ç–∫** - –µ—Å–ª–∏ —É –º–∞—Å—Ç–µ—Ä–∞ –Ω–µ—Ç –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫, –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –≥–ª–æ–±–∞–ª—å–Ω—ã–µ
- **–í–∞–ª–∏–¥–∞—Ü–∏—è** - —Å—É–º–º–∞ –≤—Å–µ—Ö –ø—Ä–æ—Ü–µ–Ω—Ç–æ–≤ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å —Ä–∞–≤–Ω–∞ 100%
- **–ê—É–¥–∏—Ç** - –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –∫—Ç–æ –∏ –∫–æ–≥–¥–∞ —Å–æ–∑–¥–∞–ª/–æ–±–Ω–æ–≤–∏–ª –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

### üîß API Endpoints (–≤—Å–µ —Ä–∞–±–æ—Ç–∞—é—Ç!)

#### 1. –ü–æ–ª—É—á–µ–Ω–∏–µ –≤—Å–µ—Ö –º–∞—Å—Ç–µ—Ä–æ–≤ —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏
```
GET /api/profit-settings/masters/
Authorization: Token {admin_token}

Response:
{
  "masters": [
    {
      "id": 2,
      "name": "master@gmail.com", 
      "email": "master@gmail.com",
      "has_individual_settings": true,
      "settings": {
        "master_paid_percent": 40,
        "master_balance_percent": 25,
        "curator_percent": 10,
        "company_percent": 25,
        "is_individual": true,
        "settings_id": 1
      }
    }
  ],
  "total_count": 7
}
```

#### 2. –ü–æ–ª—É—á–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–µ–∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –º–∞—Å—Ç–µ—Ä–∞
```
GET /api/profit-settings/master/{master_id}/
Authorization: Token {token}
```

#### 3. –°–æ–∑–¥–∞–Ω–∏–µ/–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫
```
POST /api/profit-settings/master/{master_id}/set/
Authorization: Token {admin_token}
Content-Type: application/json

{
  "master_paid_percent": 35,
  "master_balance_percent": 25, 
  "curator_percent": 10,
  "company_percent": 30,
  "is_active": true
}
```

#### 4. –£–¥–∞–ª–µ–Ω–∏–µ –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫
```
DELETE /api/profit-settings/master/{master_id}/delete/
Authorization: Token {admin_token}
```

#### 5. –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–π —Ä–∞—Å—á–µ—Ç –¥–ª—è –∑–∞–∫–∞–∑–∞
```
GET /api/orders/{order_id}/profit-preview/
Authorization: Token {token}
```

### üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

#### –ú–æ–¥–µ–ª—å Order
- –î–æ–±–∞–≤–ª–µ–Ω –º–µ—Ç–æ–¥ `get_profit_settings()` - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã–±–∏—Ä–∞–µ—Ç –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–µ –∏–ª–∏ –≥–ª–æ–±–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏

#### –§—É–Ω–∫—Ü–∏—è —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –ø—Ä–∏–±—ã–ª–∏
- –û–±–Ω–æ–≤–ª–µ–Ω–∞ `distribute_order_profit()` –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫
- –ü–æ–ª–Ω–∞—è —Ç—Ä–∞—Å—Å–∏—Ä—É–µ–º–æ—Å—Ç—å - –∫—Ç–æ, –∫–æ–≥–¥–∞ –∏ –∫–∞–∫–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–∏–º–µ–Ω–∏–ª
- –î–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ `SystemLog` –∏ `FinancialTransaction`

#### –ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞
- **–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã**: –ø–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫–æ –≤—Å–µ–º –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º
- **–ú–∞—Å—Ç–µ—Ä–∞**: –º–æ–≥—É—Ç –ø—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å —Ç–æ–ª—å–∫–æ —Å–≤–æ–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
- **–û—Å—Ç–∞–ª—å–Ω—ã–µ —Ä–æ–ª–∏**: –Ω–µ—Ç –¥–æ—Å—Ç—É–ø–∞

### üìã –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö

#### MasterProfitSettings
```python
{
  "master": ForeignKey(CustomUser),
  "master_paid_percent": int,      # % —Å—Ä–∞–∑—É –∫ –≤—ã–ø–ª–∞—Ç–µ
  "master_balance_percent": int,   # % –Ω–∞ –±–∞–ª–∞–Ω—Å  
  "curator_percent": int,          # % –∫—É—Ä–∞—Ç–æ—Ä—É
  "company_percent": int,          # % –∫–æ–º–ø–∞–Ω–∏–∏
  "is_active": bool,               # –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å –Ω–∞—Å—Ç—Ä–æ–µ–∫
  "created_by": ForeignKey,        # –∫—Ç–æ —Å–æ–∑–¥–∞–ª
  "updated_by": ForeignKey,        # –∫—Ç–æ –æ–±–Ω–æ–≤–∏–ª
  "created_at": datetime,
  "updated_at": datetime
}
```

### üß™ –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ

#### ‚úÖ –ú–æ–¥–µ–ª–∏ –∏ –º–∏–≥—Ä–∞—Ü–∏–∏
- –°–æ–∑–¥–∞–Ω—ã –∏ –ø—Ä–∏–º–µ–Ω–µ–Ω—ã –º–∏–≥—Ä–∞—Ü–∏–∏ –¥–ª—è –Ω–æ–≤—ã—Ö –ø–æ–ª–µ–π
- –í—Å–µ —Å–∏—Å—Ç–µ–º–Ω—ã–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ Django –ø—Ä–æ—Ö–æ–¥—è—Ç –±–µ–∑ –æ—à–∏–±–æ–∫

#### ‚úÖ –õ–æ–∫–∞–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞  
- –ú–µ—Ç–æ–¥ `MasterProfitSettings.get_settings_for_master()` —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ñ–∞–ª–ª–±—ç–∫ –Ω–∞ –≥–ª–æ–±–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
- –ú–µ—Ç–æ–¥ `Order.get_profit_settings()` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

#### ‚úÖ API Endpoints
- –í—Å–µ endpoints –æ—Ç–≤–µ—á–∞—é—Ç –∏ –≤–æ–∑–≤—Ä–∞—â–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
- –ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ —Ä–∞–±–æ—Ç–∞—é—Ç –∫–∞–∫ –∑–∞–¥—É–º–∞–Ω–æ
- –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∏—Ä—É–µ—Ç

#### ‚úÖ –§—É–Ω–∫—Ü–∏—è —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –ø—Ä–∏–±—ã–ª–∏
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –º–∞—Å—Ç–µ—Ä–∞
- –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ–±–Ω–æ–≤–ª—è–µ—Ç –±–∞–ª–∞–Ω—Å—ã –≤—Å–µ—Ö —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤
- –õ–æ–≥–∏—Ä—É–µ—Ç –≤—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –¥–ª—è –∞—É–¥–∏—Ç–∞

### üöÄ –ì–æ—Ç–æ–≤–æ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

–°–µ—Ä–≤–µ—Ä–Ω–∞—è —á–∞—Å—Ç—å –ø–æ–ª–Ω–æ—Å—Ç—å—é –≥–æ—Ç–æ–≤–∞ –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∞. –°–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:

1. **–ò—Å–ø–æ–ª—å–∑—É–µ—Ç –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏** –º–∞—Å—Ç–µ—Ä–∞, –µ—Å–ª–∏ –æ–Ω–∏ –µ—Å—Ç—å –∏ –∞–∫—Ç–∏–≤–Ω—ã
2. **–ü–µ—Ä–µ–∫–ª—é—á–∞–µ—Ç—Å—è –Ω–∞ –≥–ª–æ–±–∞–ª—å–Ω—ã–µ** –Ω–∞—Å—Ç—Ä–æ–π–∫–∏, –µ—Å–ª–∏ –∏–Ω–¥–∏–≤–∏–¥—É–∞–ª—å–Ω—ã—Ö –Ω–µ—Ç
3. **–í–∞–ª–∏–¥–∏—Ä—É–µ—Ç –¥–∞–Ω–Ω—ã–µ** –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏/–æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ –Ω–∞—Å—Ç—Ä–æ–µ–∫
4. **–õ–æ–≥–∏—Ä—É–µ—Ç –≤—Å–µ –æ–ø–µ—Ä–∞—Ü–∏–∏** –¥–ª—è –ø–æ–ª–Ω–æ–π —Ç—Ä–∞—Å—Å–∏—Ä—É–µ–º–æ—Å—Ç–∏
5. **–ö–æ–Ω—Ç—Ä–æ–ª–∏—Ä—É–µ—Ç –¥–æ—Å—Ç—É–ø** –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ä–æ–ª–µ–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π

### üìà –°–ª–µ–¥—É—é—â–∏–π —à–∞–≥: –ö–ª–∏–µ–Ω—Ç—Å–∫–∞—è —á–∞—Å—Ç—å

–¢–µ–ø–µ—Ä—å –º–æ–∂–Ω–æ –ø—Ä–∏—Å—Ç—É–ø–∞—Ç—å –∫ —Å–æ–∑–¥–∞–Ω–∏—é –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–≤:

1. **–°—Ç—Ä–∞–Ω–∏—Ü–∞ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞** - —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ –≤—Å–µ—Ö –º–∞—Å—Ç–µ—Ä–æ–≤
2. **–ü—Ä–æ—Ñ–∏–ª—å –º–∞—Å—Ç–µ—Ä–∞** - –ø—Ä–æ—Å–º–æ—Ç—Ä —Å–≤–æ–∏—Ö –Ω–∞—Å—Ç—Ä–æ–µ–∫
3. **–ö–∞—Ä—Ç–æ—á–∫–∞ –∑–∞–∫–∞–∑–∞** - –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø—Ä–æ—Ü–µ–Ω—Ç–æ–≤ –∏ –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ–≥–æ —Ä–∞—Å—á–µ—Ç–∞
4. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è** —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º–∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞–º–∏

**–î–∞—Ç–∞**: $(date)  
**–°—Ç–∞—Ç—É—Å**: ‚úÖ –°–ï–†–í–ï–†–ù–ê–Ø –ß–ê–°–¢–¨ –ì–û–¢–û–í–ê –ö –ü–†–û–î–ê–ö–®–ï–ù–£
