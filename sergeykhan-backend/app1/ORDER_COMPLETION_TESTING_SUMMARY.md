# Тестирование завершения заказов - Инструкция

## Созданные файлы

1. **`create_test_completion_orders.py`** - Скрипт для создания тестовых заказов в статусах "назначен" и "выполняется", предназначенных для тестирования процесса завершения.

2. **`ORDER_COMPLETION_TEST_INSTRUCTIONS.md`** - Подробная инструкция с описанием созданных тестовых заказов и шагов для тестирования.

3. **`test_order_completion.py`** - Скрипт для тестирования API завершения заказов (имитирует процесс без фактического вызова API, но имеет опцию реального тестирования).

## Созданные тестовые данные

- Создано 10 тестовых заказов в статусах "назначен" и "выполняется" с разными мастерами и датами выполнения.
- Все заказы помечены как тестовые (`is_test=True`), что позволяет их легко отфильтровать в системе.
- Для каждого заказа создано расписание мастера, чтобы обеспечить доступность на указанное время.

## Как использовать для тестирования

### 1. Ручное тестирование через интерфейс

Следуйте инструкциям в файле `ORDER_COMPLETION_TEST_INSTRUCTIONS.md`:
- Войдите в систему как мастер, которому назначены заказы
- Отметьте заказ как выполненный
- Войдите как куратор и подтвердите/отклоните завершение
- Проверьте корректность обновления статусов и финансовой информации

### 2. Тестирование API

Запустите скрипт тестирования API:
```bash
cd /Users/bekzhan/Documents/projects/sk/SergeyKhanWeb/sergeykhan-backend
python3 app1/test_order_completion.py
```

Скрипт:
- Выполнит имитацию процесса завершения заказа
- Предложит провести реальное тестирование API (по желанию)
- Покажет результаты каждого шага

## Дополнительная информация

### Учётные данные для тестирования

**Мастера:**
- Алексей Петров: master1@test.com / test123456
- Дмитрий Иванов: master2@test.com / test123456
- Сергей Сидоров: master3@test.com / test123456
- Андрей Козлов: master4@test.com / test123456

**Операторы:**
- Мария Операторова: operator1@test.com / test123456
- Анна Диспетчерова: operator2@test.com / test123456

**Куратор:**
- Елена Кураторова: curator1@test.com / test123456

### Повторное создание тестовых данных

Если вам понадобится создать больше тестовых заказов или очистить старые и создать новые, выполните:

```bash
cd /Users/bekzhan/Documents/projects/sk/SergeyKhanWeb/sergeykhan-backend
python3 app1/create_test_completion_orders.py
```

## Статусы заказов для тестирования

Процесс завершения заказа включает следующие статусы:
1. **назначен** - Заказ назначен мастеру, но еще не начат
2. **выполняется** - Мастер начал выполнение заказа
3. **ожидает_подтверждения** - Мастер отметил заказ как выполненный, ожидается подтверждение куратора
4. **завершен** - Куратор подтвердил выполнение заказа
5. **отклонен** - Куратор отклонил завершение заказа, требуется доработка
