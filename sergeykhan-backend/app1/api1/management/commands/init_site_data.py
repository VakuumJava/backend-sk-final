from django.core.management.base import BaseCommand
from api1.models import SiteSettings, Service

class Command(BaseCommand):
    help = '–°–æ–∑–¥–∞–µ—Ç –Ω–∞—á–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –¥–ª—è —Å–∞–π—Ç–∞'

    def handle(self, *args, **options):
        # –°–æ–∑–¥–∞–µ–º –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–∞–π—Ç–∞, –µ—Å–ª–∏ –∏—Ö –µ—â–µ –Ω–µ—Ç
        if not SiteSettings.objects.exists():
            settings = SiteSettings.objects.create(
                phone="+7 (777) 123-45-67",
                email="info@sergeykhan.kz", 
                address="–≥. –ê–ª–º–∞—Ç—ã",
                working_hours="24/7",
                facebook_url="https://facebook.com/sergeykhan",
                instagram_url="https://instagram.com/sergeykhan", 
                telegram_url="https://t.me/sergeykhan",
                whatsapp_url="https://wa.me/77771234567",
                hero_title="–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π —Ä–µ–º–æ–Ω—Ç –±—ã—Ç–æ–≤–æ–π —Ç–µ—Ö–Ω–∏–∫–∏",
                hero_subtitle="–ë—ã—Å—Ç—Ä–æ, –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω–æ, —Å –≥–∞—Ä–∞–Ω—Ç–∏–µ–π 6 –º–µ—Å—è—Ü–µ–≤. –í—ã–µ–∑–¥ –º–∞—Å—Ç–µ—Ä–∞ –∑–∞ 1 —á–∞—Å –≤ –ª—é–±–æ–π —Ä–∞–π–æ–Ω –ê–ª–º–∞—Ç—ã.",
                about_title="–ü–æ—á–µ–º—É –≤—ã–±–∏—Ä–∞—é—Ç –Ω–∞—Å",
                about_description="–ú—ã ‚Äî –∫–æ–º–∞–Ω–¥–∞ –ø—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª–æ–≤ —Å –º–Ω–æ–≥–æ–ª–µ—Ç–Ω–∏–º –æ–ø—ã—Ç–æ–º —Ä–µ–º–æ–Ω—Ç–∞ –±—ã—Ç–æ–≤–æ–π —Ç–µ—Ö–Ω–∏–∫–∏. –ò—Å–ø–æ–ª—å–∑—É–µ–º —Ç–æ–ª—å–∫–æ –æ—Ä–∏–≥–∏–Ω–∞–ª—å–Ω—ã–µ –∑–∞–ø—á–∞—Å—Ç–∏ –∏ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–µ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ."
            )
            self.stdout.write(self.style.SUCCESS("‚úÖ –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–∞–π—Ç–∞ —Å–æ–∑–¥–∞–Ω—ã"))
        else:
            self.stdout.write(self.style.WARNING("‚ÑπÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–∞–π—Ç–∞ —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É—é—Ç"))
        
        # –°–æ–∑–¥–∞–µ–º –±–∞–∑–æ–≤—ã–µ —É—Å–ª—É–≥–∏
        services_data = [
            {
                "name": "–†–µ–º–æ–Ω—Ç —Ö–æ–ª–æ–¥–∏–ª—å–Ω–∏–∫–æ–≤",
                "description": "–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω—ã–π —Ä–µ–º–æ–Ω—Ç —Ö–æ–ª–æ–¥–∏–ª—å–Ω–∏–∫–æ–≤ –≤—Å–µ—Ö –º–∞—Ä–æ–∫: Samsung, LG, Bosch, Indesit, Ariston –∏ –¥—Ä.",
                "price_from": 5000,
                "order": 1
            },
            {
                "name": "–†–µ–º–æ–Ω—Ç —Å—Ç–∏—Ä–∞–ª—å–Ω—ã—Ö –º–∞—à–∏–Ω", 
                "description": "–†–µ–º–æ–Ω—Ç —Å—Ç–∏—Ä–∞–ª—å–Ω—ã—Ö –º–∞—à–∏–Ω –ª—é–±–æ–π —Å–ª–æ–∂–Ω–æ—Å—Ç–∏. –ó–∞–º–µ–Ω–∞ –ø–æ–¥—à–∏–ø–Ω–∏–∫–æ–≤, –Ω–∞—Å–æ—Å–æ–≤, —ç–ª–µ–∫—Ç—Ä–æ–Ω–∏–∫–∏.",
                "price_from": 4000,
                "order": 2
            },
            {
                "name": "–†–µ–º–æ–Ω—Ç –º–∏–∫—Ä–æ–≤–æ–ª–Ω–æ–≤—ã—Ö –ø–µ—á–µ–π",
                "description": "–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –∏ —Ä–µ–º–æ–Ω—Ç –º–∏–∫—Ä–æ–≤–æ–ª–Ω–æ–≤—ã—Ö –ø–µ—á–µ–π. –ó–∞–º–µ–Ω–∞ –º–∞–≥–Ω–µ—Ç—Ä–æ–Ω–æ–≤, –±–ª–æ–∫–æ–≤ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è.",
                "price_from": 3000,
                "order": 3
            },
            {
                "name": "–†–µ–º–æ–Ω—Ç –ø–æ—Å—É–¥–æ–º–æ–µ—á–Ω—ã—Ö –º–∞—à–∏–Ω",
                "description": "–†–µ–º–æ–Ω—Ç –ø–æ—Å—É–¥–æ–º–æ–µ—á–Ω—ã—Ö –º–∞—à–∏–Ω: –∑–∞–º–µ–Ω–∞ –Ω–∞—Å–æ—Å–æ–≤, –∫–ª–∞–ø–∞–Ω–æ–≤, —ç–ª–µ–∫—Ç—Ä–æ–Ω–Ω—ã—Ö –º–æ–¥—É–ª–µ–π.",
                "price_from": 4500,
                "order": 4
            },
            {
                "name": "–†–µ–º–æ–Ω—Ç –¥—É—Ö–æ–≤—ã—Ö —à–∫–∞—Ñ–æ–≤",
                "description": "–†–µ–º–æ–Ω—Ç —ç–ª–µ–∫—Ç—Ä–∏—á–µ—Å–∫–∏—Ö –∏ –≥–∞–∑–æ–≤—ã—Ö –¥—É—Ö–æ–≤—ã—Ö —à–∫–∞—Ñ–æ–≤, –≤–∞—Ä–æ—á–Ω—ã—Ö –ø–∞–Ω–µ–ª–µ–π.",
                "price_from": 3500,
                "order": 5
            },
            {
                "name": "–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –Ω–µ–∏—Å–ø—Ä–∞–≤–Ω–æ—Å—Ç–µ–π",
                "description": "–ë–µ—Å–ø–ª–∞—Ç–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ –ø—Ä–∏ –∑–∞–∫–∞–∑–µ —Ä–µ–º–æ–Ω—Ç–∞. –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø—Ä–∏—á–∏–Ω—ã –ø–æ–ª–æ–º–∫–∏.",
                "price_from": 1000,
                "order": 6
            }
        ]
        
        created_count = 0
        for service_data in services_data:
            if not Service.objects.filter(name=service_data["name"]).exists():
                Service.objects.create(**service_data)
                created_count += 1
                self.stdout.write(self.style.SUCCESS(f"‚úÖ –°–æ–∑–¥–∞–Ω–∞ —É—Å–ª—É–≥–∞: {service_data['name']}"))
        
        if created_count == 0:
            self.stdout.write(self.style.WARNING("‚ÑπÔ∏è –í—Å–µ —É—Å–ª—É–≥–∏ —É–∂–µ —Å—É—â–µ—Å—Ç–≤—É—é—Ç"))
        else:
            self.stdout.write(self.style.SUCCESS(f"‚úÖ –°–æ–∑–¥–∞–Ω–æ {created_count} –Ω–æ–≤—ã—Ö —É—Å–ª—É–≥"))
        
        self.stdout.write(self.style.SUCCESS("\nüéâ –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞!"))
        self.stdout.write(f"üìä –í—Å–µ–≥–æ —É—Å–ª—É–≥ –≤ –±–∞–∑–µ: {Service.objects.count()}")
        self.stdout.write(f"‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–∞–π—Ç–∞: {'–Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã' if SiteSettings.objects.exists() else '–Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã'}")
